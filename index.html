<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>CatKitSune â€“ Quests & Swap</title>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet"/>
<script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
<style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    :root {
      --bg-main: #f6ecff;
      --bg-card: #ffffff;
      --primary: #6a3df5;
      --primary-soft: #e2d6ff;
      --accent-green: #28c76f;
      --border: #e5e7eb;
      --text-main: #111827;
      --text-muted: #6b7280;
      --radius-lg: 16px;
      --radius-xl: 20px;
      --shadow-card: 0 10px 30px rgba(15, 23, 42, 0.12);
    }

    body {
      font-family: "Inter", sans-serif;
      background: var(--bg-main);
      color: var(--text-main);
      min-height: 100vh;
    }

    .app { min-height: 100vh; display: flex; flex-direction: column; }

    header {
      padding: 2px 16px;
      background: var(--bg-main);
      border-bottom: 1px solid var(--border);
      display: flex; align-items: center; justify-content: space-between;
    }

    .logo {
      font-size: 14px;
      font-weight: 800;
      display: flex;
      align-items: center;
      gap: 8px;
      cursor: pointer;
    }

    .paw-icon {
      width: 24px;
      height: 24px;
      display: inline-block;
      background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200"><ellipse cx="65" cy="50" rx="23" ry="33" fill="%238b5cf6"/><ellipse cx="135" cy="50" rx="23" ry="33" fill="%238b5cf6"/><ellipse cx="35" cy="80" rx="20" ry="30" fill="%238b5cf6" transform="rotate(-25 35 80)"/><ellipse cx="165" cy="80" rx="20" ry="30" fill="%238b5cf6" transform="rotate(25 165 80)"/><ellipse cx="100" cy="130" rx="55" ry="50" fill="%238b5cf6"/></svg>');
      background-size: contain;
      background-repeat: no-repeat;
      background-position: center;
    }

    .top-actions { display: flex; align-items: center; gap: 8px; }

    .login-btn {
      font-size: 12px; padding: 6px 12px; border-radius: 999px;
      border: 1px solid var(--border);
      background: #f9fafb;
      cursor: pointer;
      display:flex;
      align-items:center;
      gap:6px;
      transition: all 0.2s;
    }

    .login-btn:hover {
      background: #f3f4f6;
      transform: translateY(-1px);
    }

    .avatar {
      width: 26px; height: 26px; border-radius: 50%;
      background: linear-gradient(135deg, #6a3df5, #22c55e);
    }

    main { flex: 1; padding: 0 12px 80px; max-width: 1200px; margin: 0 auto; width: 100%; }

    .top-nav {
      margin-top: 20px;
      margin-bottom: 20px;
      display: flex;
      justify-content: center;
      gap: 12px;
    }

    .top-nav-btn {
      padding: 4px 14px;
      font-size: 13px;
      border-radius: 999px;
      border: 1px solid #d4d4d8;
      background: #fff;
      cursor: pointer;
      transition: 0.2s;
    }

    .top-nav-btn:hover { background: #f3f4f6; }

    .top-nav-btn.active {
      background: #6a3df5;
      color: white;
      border-color: #6a3df5;
    }

.view {
  display: none;
  width: 100%;
}

.view.active {
  display: block;
}

.views-container {
  position: relative;
}

    .hero-card {
      background: linear-gradient(180deg, #f6ecff 0%, #efe3ff 100%);
      border-radius: 20px;
      padding: 16px 14px 14px;
      box-shadow: var(--shadow-card);
      margin-bottom: 0;
      text-align: center;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }

    .hero-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg, rgba(106, 61, 245, 0.1), rgba(34, 197, 94, 0.1));
      opacity: 0;
      transition: opacity 0.3s ease;
      z-index: 0;
    }

    .hero-card:hover::before {
      opacity: 1;
    }

    .hero-card > * {
      position: relative;
      z-index: 1;
    }

    .hero-card:hover {
      box-shadow: 0 12px 40px rgba(106, 61, 245, 0.2);
      transform: translateY(-2px);
    }

    .hero-title { font-size: 18px; font-weight: 800; margin-bottom: 3px; }
    .hero-sub { font-size: 12px; color: var(--text-muted); margin-bottom: 12px; }

    .stats-row {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 8px; margin-bottom: 0;
    }

    .stat-card {
      background: #fff;
      border-radius: 12px;
      padding: 8px 6px;
      border: 1px solid var(--primary-soft);
      transition: all 0.3s ease;
      cursor: pointer;
      position: relative;
      overflow: hidden;
    }

    .stat-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg, rgba(106, 61, 245, 0.1), rgba(34, 197, 94, 0.1));
      opacity: 0;
      transition: opacity 0.3s ease;
      z-index: 0;
    }

    .stat-card:hover::before {
      opacity: 1;
    }

    .stat-card > * {
      position: relative;
      z-index: 1;
    }

    .stat-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(106, 61, 245, 0.15);
      border-color: var(--primary);
      background: white;
    }

    .stat-label { font-size: 10px; color: var(--text-muted); margin-bottom: 3px; }
    .stat-value { font-size: 16px; font-weight: 700; }

    .content-grid {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    .quests-section {
      display: grid;
      grid-template-columns: 2fr 1fr;
      gap: 20px;
    }

    .card {
      background: var(--bg-card);
      border-radius: var(--radius-xl);
      border: 1px solid var(--border);
      box-shadow: var(--shadow-card);
      padding: 18px 16px;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }

    .card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg, rgba(106, 61, 245, 0.05), rgba(34, 197, 94, 0.05));
      opacity: 0;
      transition: opacity 0.3s ease;
      z-index: 0;
      pointer-events: none;
    }

    .card:hover::before {
      opacity: 1;
    }

    .card > * {
      position: relative;
      z-index: 1;
    }

    .card:hover {
      box-shadow: 0 12px 40px rgba(106, 61, 245, 0.15);
      transform: translateY(-2px);
      border-color: var(--primary-soft);
    }

    .card-title {
      font-size: 14px; font-weight: 700; margin-bottom: 12px;
      display: flex; align-items: center; gap: 8px;
    }

    .card-title span.dot {
      width: 6px; height: 6px; border-radius: 999px; background: var(--primary);
    }

    .mission-list { display: flex; flex-direction: column; gap: 8px; }

    .mission-item {
      display: flex; align-items: center; justify-content: space-between;
      padding: 9px 10px; border-radius: 12px;
      border: 1px solid #e5e7eb; background: #f9fafb;
      font-size: 12px;
      transition: all 0.3s ease;
      cursor: pointer;
      position: relative;
      overflow: hidden;
    }

    .mission-item::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg, rgba(106, 61, 245, 0.1), rgba(34, 197, 94, 0.1));
      opacity: 0;
      transition: opacity 0.3s ease;
      z-index: 0;
    }

    .mission-item:hover::before {
      opacity: 1;
    }

    .mission-item > * {
      position: relative;
      z-index: 1;
    }

    .mission-item:hover {
      border-color: var(--primary);
      background: white;
      box-shadow: 0 6px 16px rgba(106, 61, 245, 0.15);
      transform: translateY(-2px);
    }

    .mission-left { display: flex; align-items: center; gap: 10px; }

    .mission-check {
      width: 16px; height: 16px; border-radius: 999px;
      border: 2px solid #d1d5db; background: #fff;
    }

    .mission-check.completed {
      background: var(--accent-green);
      border-color: var(--accent-green);
    }

    .mission-text-title { font-weight: 600; margin-bottom: 2px; }
    .mission-text-sub { color: var(--text-muted); font-size: 11px; }

    .mission-points { color: #16a34a; font-weight: 600; font-size: 12px; }

    .nft-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 12px;
      margin-top: 10px;
    }

    .nft-card {
      border-radius: 10px;
      border: 1px dashed #d4d4d8;
      background: #f9fafb;
      padding: 14px 8px;
      text-align: center;
      font-size: 11px;
      color: var(--text-muted);
      transition: all 0.3s ease;
      cursor: pointer;
      position: relative;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      width: 100%;
      height: 90px;
    }

    .nft-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg, rgba(106, 61, 245, 0.1), rgba(34, 197, 94, 0.1));
      opacity: 0;
      transition: opacity 0.3s ease;
      z-index: 0;
    }

    .nft-card:hover {
      transform: translateY(-4px);
      border-color: var(--primary);
      border-style: solid;
      background: white;
      box-shadow: 0 8px 24px rgba(106, 61, 245, 0.25);
    }

    .nft-card:hover::before {
      opacity: 1;
    }

    .nft-card strong {
      display: block;
      font-size: 10.5px;
      color: var(--text-main);
      font-weight: 600;
      position: relative;
      z-index: 1;
      line-height: 1.3;
      word-break: break-word;
      max-width: 100%;
      text-align: center;
    }
    
    .nft-image {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: 10px;
      position: absolute;
      top: 0;
      left: 0;
      z-index: 0;
    }

    .nft-count {
      display: block;
      font-size: 10px;
      color: var(--text-muted);
      font-weight: 500;
      text-align: center;
      margin-top: 4px;
    }

    @media (max-width: 768px) {
      .quests-section {
        grid-template-columns: 1fr;
      }
      .nft-grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }
    #view-roadmap .content-grid {
      margin-top: 0 !important;
      padding-top: 0 !important;
    }
    
    #view-airdrop .content-grid {
      margin-top: 0 !important;
      padding-top: 0 !important;
    }
    
    #view-token .content-grid {
      margin-top: 0 !important;
      padding-top: 0 !important;
    }

    #view-roadmap,
    #view-airdrop,
    #view-token,
    #view-staking {
      margin-top: 0 !important;
      padding-top: 0 !important;
    }
  </style>
</head>
<body>
<div class="app">
<header>
<div class="logo" onclick="showView(event, 'quests')">
<span class="paw-icon"></span>
<span>CatKitSune</span>
</div>
<div class="top-actions">
<button class="login-btn" id="walletBtn" onclick="toggleWallet()">
<img src="https://cdn-icons-png.flaticon.com/512/891/891462.png" style="width:18px;"/>
<span id="walletText">Connect Wallet</span>
</button>
<button class="login-btn" id="twitterBtn" onclick="loginWithTwitter()">
<img src="https://cdn-icons-png.flaticon.com/512/733/733579.png" style="width:18px;"/>
Login with Twitter
</button>
<div id="twitterAvatar" style="display:none; align-items:center; gap:6px;"></div>
<div class="avatar"></div>
</div>
</header>

<div class="views-container">

<main class="view active" id="view-quests">
<div class="hero-card">
<div class="hero-title">Complete quests. Earn points. Climb the leaderboard.</div>
<div class="hero-sub">Join the community and reach the highest level!</div>
<div class="stats-row">
<div class="stat-card"><div class="stat-label">Total Points</div><div class="stat-value" id="totalPoints">0</div></div>
<div class="stat-card"><div class="stat-label">Quests</div><div class="stat-value">11</div></div>
<div class="stat-card"><div class="stat-label">Completed</div><div class="stat-value" id="completedQuests">0</div></div>
<div class="stat-card"><div class="stat-label">Rank</div><div class="stat-value">#TBD</div></div>
</div>
</div>

<div class="top-nav">
<button class="top-nav-btn active" onclick="showView(event, 'quests')">ğŸ®</button>
<button class="top-nav-btn" onclick="showView(event, 'roadmap')">ğŸ—ºï¸</button>
<button class="top-nav-btn" onclick="showView(event, 'airdrop')">ğŸª‚</button>
<button class="top-nav-btn" onclick="showView(event, 'token')">ğŸª™</button>
<button class="top-nav-btn" onclick="showView(event, 'staking')">ğŸ’</button>
</div>

<div class="content-grid">

<div class="card" style="grid-column:1/-1;">
<div class="card-title" style="margin-bottom:20px;">
<span class="dot"></span> ğŸ¦ Latest Twitter Posts
</div>

<div style="background:white;border:1px solid #e5e7eb;border-radius:12px;padding:16px 20px;margin-bottom:20px;">
<div style="text-align:center;margin-bottom:12px;">
<div style="font-size:16px;font-weight:700;color:#6a3df5;margin-bottom:4px;">
ğŸ”¥ Share Our Posts & Earn Points!
</div>
<div style="font-size:12px;color:#6b7280;font-weight:500;">
Rewarding active support ğŸš€
</div>
</div>
<div style="text-align:center;margin-bottom:12px;">
<div style="font-size:11px;color:#6b7280;margin-bottom:6px;font-weight:500;">
Follow us:
</div>
<div style="display:inline-flex;gap:8px;align-items:center;">
<a href="https://x.com/GborSzakl1" target="_blank" style="display:inline-flex;align-items:center;gap:4px;padding:5px 10px;background:#f9fafb;color:#1da1f2;text-decoration:none;border-radius:6px;font-weight:600;font-size:11px;border:1px solid #e5e7eb;transition:0.2s;">
<svg style="width:12px;height:12px;" viewBox="0 0 24 24" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
@GborSzakl1
</a>
<a href="https://x.com/MariannCso1714" target="_blank" style="display:inline-flex;align-items:center;gap:4px;padding:5px 10px;background:#f9fafb;color:#1da1f2;text-decoration:none;border-radius:6px;font-weight:600;font-size:11px;border:1px solid #e5e7eb;transition:0.2s;">
<svg style="width:12px;height:12px;" viewBox="0 0 24 24" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
@MariannCso1714
</a>
</div>
</div>
<div style="text-align:center;font-size:11px;color:#6b7280;line-height:1.4;">
Share (retweet ğŸ”) our posts and earn <strong style="color:#22c55e;">+1 EP</strong> for each share!
</div>
<div style="text-align:center;margin-top:8px;">
<span style="font-size:13px;font-weight:700;color:#6a3df5;">
Be among the TOP players ğŸ‘‘
</span>
</div>
</div>

<div id="twitterPosts" style="display:grid;grid-template-columns:1fr 1fr;gap:14px;margin-top:16px;max-width:720px;margin-left:auto;margin-right:auto;">
<div class="twitter-post-card" style="background:#ffffff;border:1px solid #f1f5f9;border-radius:20px;padding:0;box-shadow:0 1px 3px rgba(0,0,0,0.05);position:relative;overflow:hidden;transition:all 0.35s ease;cursor:pointer;" onmouseover="this.style.transform='translateY(-6px)';this.style.boxShadow='0 20px 40px rgba(106,61,245,0.12)';this.style.borderColor='#e9d5ff'" onmouseout="this.style.transform='translateY(0)';this.style.boxShadow='0 1px 3px rgba(0,0,0,0.05)';this.style.borderColor='#f1f5f9'">
<!-- Header with gradient -->
<div style="background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);padding:16px;position:relative;overflow:hidden;">
<div style="position:absolute;top:-50%;right:-20%;width:150px;height:150px;background:rgba(255,255,255,0.1);border-radius:50%;"></div>
<div style="display:flex;align-items:center;gap:12px;position:relative;z-index:1;">
<div style="width:44px;height:44px;background:rgba(255,255,255,0.95);border-radius:12px;display:flex;align-items:center;justify-content:center;box-shadow:0 4px 12px rgba(0,0,0,0.1);">
<svg style="width:24px;height:24px;color:#1da1f2;" viewBox="0 0 24 24" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
</div>
<div style="flex:1;min-width:0;">
<div style="font-weight:700;font-size:14px;color:white;text-shadow:0 1px 2px rgba(0,0,0,0.1);">@GborSzakl1</div>
<div style="font-size:11px;color:rgba(255,255,255,0.85);font-weight:500;">Latest Tweet</div>
</div>
</div>
</div>
<!-- Content -->
<div style="padding:16px;">
<div style="color:#334155;font-size:13px;line-height:1.6;margin-bottom:16px;min-height:38px;font-weight:400;">
Loading latest tweet...
</div>
<!-- Actions -->
<div style="display:flex;gap:8px;">
<a href="https://x.com/GborSzakl1" target="_blank" style="flex:1;padding:10px;background:#1da1f2;color:white;text-decoration:none;border-radius:12px;font-size:12px;font-weight:600;text-align:center;transition:all 0.2s;display:flex;align-items:center;justify-content:center;gap:6px;border:none;" onmouseover="this.style.background='#1a8cd8';this.style.transform='scale(1.03)'" onmouseout="this.style.background='#1da1f2';this.style.transform='scale(1)'">
<span style="font-size:14px;">ğŸ”</span> Share
</a>
<button onclick="verifyTwitterShare(1)" style="flex:1;padding:10px;background:linear-gradient(135deg,#10b981 0%,#059669 100%);color:white;border:none;border-radius:12px;font-size:12px;font-weight:600;cursor:pointer;transition:all 0.2s;display:flex;align-items:center;justify-content:center;gap:4px;" onmouseover="this.style.transform='scale(1.03)';this.style.boxShadow='0 4px 12px rgba(16,185,129,0.3)'" onmouseout="this.style.transform='scale(1)';this.style.boxShadow='none'">
<span style="font-size:14px;">âœ“</span> Verify
</button>
</div>
</div>
</div>

<div class="twitter-post-card" style="background:#ffffff;border:1px solid #f1f5f9;border-radius:20px;padding:0;box-shadow:0 1px 3px rgba(0,0,0,0.05);position:relative;overflow:hidden;transition:all 0.35s ease;cursor:pointer;" onmouseover="this.style.transform='translateY(-6px)';this.style.boxShadow='0 20px 40px rgba(106,61,245,0.12)';this.style.borderColor='#e9d5ff'" onmouseout="this.style.transform='translateY(0)';this.style.boxShadow='0 1px 3px rgba(0,0,0,0.05)';this.style.borderColor='#f1f5f9'">
<!-- Header with gradient -->
<div style="background:linear-gradient(135deg,#f093fb 0%,#f5576c 100%);padding:16px;position:relative;overflow:hidden;">
<div style="position:absolute;top:-50%;right:-20%;width:150px;height:150px;background:rgba(255,255,255,0.1);border-radius:50%;"></div>
<div style="display:flex;align-items:center;gap:12px;position:relative;z-index:1;">
<div style="width:44px;height:44px;background:rgba(255,255,255,0.95);border-radius:12px;display:flex;align-items:center;justify-content:center;box-shadow:0 4px 12px rgba(0,0,0,0.1);">
<svg style="width:24px;height:24px;color:#1da1f2;" viewBox="0 0 24 24" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
</div>
<div style="flex:1;min-width:0;">
<div style="font-weight:700;font-size:14px;color:white;text-shadow:0 1px 2px rgba(0,0,0,0.1);">@MariannCso1714</div>
<div style="font-size:11px;color:rgba(255,255,255,0.85);font-weight:500;">Latest Tweet</div>
</div>
</div>
</div>
<!-- Content -->
<div style="padding:16px;">
<div style="color:#334155;font-size:13px;line-height:1.6;margin-bottom:16px;min-height:38px;font-weight:400;">
Loading latest tweet...
</div>
<!-- Actions -->
<div style="display:flex;gap:8px;">
<a href="https://x.com/MariannCso1714" target="_blank" style="flex:1;padding:10px;background:#1da1f2;color:white;text-decoration:none;border-radius:12px;font-size:12px;font-weight:600;text-align:center;transition:all 0.2s;display:flex;align-items:center;justify-content:center;gap:6px;border:none;" onmouseover="this.style.background='#1a8cd8';this.style.transform='scale(1.03)'" onmouseout="this.style.background='#1da1f2';this.style.transform='scale(1)'">
<span style="font-size:14px;">ğŸ”</span> Share
</a>
<button onclick="verifyTwitterShare(2)" style="flex:1;padding:10px;background:linear-gradient(135deg,#10b981 0%,#059669 100%);color:white;border:none;border-radius:12px;font-size:12px;font-weight:600;cursor:pointer;transition:all 0.2s;display:flex;align-items:center;justify-content:center;gap:4px;" onmouseover="this.style.transform='scale(1.03)';this.style.boxShadow='0 4px 12px rgba(16,185,129,0.3)'" onmouseout="this.style.transform='scale(1)';this.style.boxShadow='none'">
<span style="font-size:14px;">âœ“</span> Verify
</button>
</div>
</div>
</div>
</div>

<style>
@media (max-width: 768px) {
  #twitterPosts {
    grid-template-columns: 1fr !important;
  }
}
</style>

<div style="margin-top:12px;font-size:11px;color:#6b7280;text-align:center;">
ğŸ”„ Posts refresh once per day
</div>
</div>

<div class="card">
<div class="card-title" style="margin-bottom:20px;">
<span class="dot"></span> Leaderboard
</div>

<div style="position:relative;margin-bottom:20px;">
<input type="text" id="questsLeaderboardSearch" placeholder="Search for user or wallet address..." oninput="filterQuestsLeaderboard()" style="width:100%;padding:10px 36px 10px 12px;border-radius:10px;border:1px solid #e5e7eb;font-size:13px;outline:none;background:white;transition:all 0.3s ease;" onfocus="this.style.borderColor='#6a3df5';this.style.boxShadow='0 0 0 3px rgba(106,61,245,0.1)'" onblur="this.style.borderColor='#e5e7eb';this.style.boxShadow='none'">
<span style="position:absolute;right:12px;top:50%;transform:translateY(-50%);opacity:0.5;">ğŸ”</span>
</div>

<div style="border:1px solid #e5e7eb;border-radius:10px;background:white;overflow:hidden;">
<div style="background:#f9fafb;padding:10px 14px;display:grid;grid-template-columns:80px 1.2fr 2fr 1fr;gap:12px;font-size:12px;font-weight:600;color:#6b7280;border-bottom:2px solid #e5e7eb;position:sticky;top:0;z-index:10;">
<div>Rank</div>
<div>User</div>
<div>Address</div>
<div style="text-align:right;">Points</div>
</div>

<div id="questsLeaderboardRows" style="max-height:250px;overflow-y:auto;">
</div>
</div>

<div style="margin-top:20px;background:linear-gradient(135deg,#f6ecff,#e8f5e9);border:1px solid #e5e7eb;border-radius:12px;padding:20px;">
<div style="font-size:14px;font-weight:700;color:#6a3df5;margin-bottom:12px;display:flex;align-items:center;gap:8px;">
ğŸ”— Your Referral Link
</div>
<div style="position:relative;">
<input type="text" id="referralLink" readonly value="https://catkitsune.com/?ref=1" style="width:100%;padding:12px 80px 12px 12px;border-radius:10px;border:1px solid #d4d4ff;font-size:13px;outline:none;background:white;font-family:monospace;transition:all 0.3s ease;" onclick="this.select()" onfocus="this.style.borderColor='#6a3df5';this.style.boxShadow='0 0 0 3px rgba(106,61,245,0.1)'" onblur="this.style.borderColor='#d4d4ff';this.style.boxShadow='none'">
<button onclick="copyReferralLink()" style="position:absolute;right:8px;top:50%;transform:translateY(-50%);padding:6px 16px;background:#6a3df5;color:white;border:none;border-radius:8px;font-size:12px;font-weight:600;cursor:pointer;transition:0.2s;" onmouseover="this.style.background='#5a2dd5'" onmouseout="this.style.background='#6a3df5'">
Copy
</button>
</div>
<div style="margin-top:10px;font-size:12px;color:#6b7280;">
Share your link and earn <strong style="color:#22c55e;">+1 EP</strong> for each referral!
</div>
<div id="referralStats" style="margin-top:12px;padding:10px;background:white;border-radius:8px;font-size:12px;display:none;">
<strong style="color:#6a3df5;">ğŸ“Š Referral Stats:</strong>
<div style="margin-top:6px;color:#6b7280;">
Total referrals: <strong style="color:#22c55e;" id="refCount">0</strong> | 
Points earned: <strong style="color:#6a3df5;" id="refPoints">0 EP</strong>
</div>
</div>
</div>
</div>

<div class="quests-section">
<div class="card">
<div class="card-title"><span class="dot"></span> Quests</div>
<div style="background:#fff3cd;border:1px solid #ffc107;border-radius:8px;padding:10px;margin-bottom:12px;font-size:12px;color:#856404;">
âš ï¸ <strong>Not Live Yet</strong> - Quests are currently in testing phase
</div>
<div class="mission-list">
<div class="mission-item" onclick="completeQuest(this, 150)">
<div class="mission-left">
<div class="mission-check"></div>
<div>
<div class="mission-text-title">Follow on X</div>
<div class="mission-text-sub">Follow <a href="https://x.com/GborSzakl1" target="_blank" onclick="event.stopPropagation()">@GborSzakl1</a> on X.</div>
</div>
</div>
<div class="mission-points">+150 EP</div>
</div>
<div class="mission-item" onclick="completeQuest(this, 300)">
<div class="mission-left">
<div class="mission-check"></div>
<div>
<div class="mission-text-title">Mint the CatKitSune NFT</div>
<div class="mission-text-sub">Airdrop bonus reward.</div>
</div>
</div>
<div class="mission-points">+300 EP</div>
</div>
<div class="mission-item" onclick="completeQuest(this, 150)">
<div class="mission-left">
<div class="mission-check"></div>
<div>
<div class="mission-text-title">Swap on CatKitSune</div>
<div class="mission-text-sub">Make a swap worth at least $10.</div>
</div>
</div>
<div class="mission-points">+150 EP</div>
</div>
<div class="mission-item" onclick="completeQuest(this, 250)">
<div class="mission-left">
<div class="mission-check"></div>
<div>
<div class="mission-text-title">Share on X</div>
<div class="mission-text-sub"><a href="https://x.com/GborSzakl1/status/1989254176568672659" target="_blank" onclick="event.stopPropagation()">Open Tweet</a></div>
</div>
</div>
<div class="mission-points">+250 EP</div>
</div>
<div class="mission-item" onclick="completeQuest(this, 500)">
<div class="mission-left">
<div class="mission-check"></div>
<div>
<div class="mission-text-title">Bridge to HYPE</div>
<div class="mission-text-sub">Bridge $10 to HYPE.</div>
</div>
</div>
<div class="mission-points">+500 EP</div>
</div>
<div class="mission-item" onclick="completeQuest(this, 300)">
<div class="mission-left">
<div class="mission-check"></div>
<div>
<div class="mission-text-title">Mini Mover</div>
<div class="mission-text-sub">Transact $50 today.</div>
</div>
</div>
<div class="mission-points">+300 EP</div>
</div>
<div class="mission-item" onclick="completeQuest(this, 1)">
<div class="mission-left">
<div class="mission-check"></div>
<div>
<div class="mission-text-title">Referral Runner</div>
<div class="mission-text-sub">Refer 1 new user.</div>
</div>
</div>
<div class="mission-points">+1 EP</div>
</div>
<div class="mission-item" onclick="completeQuest(this, 300)">
<div class="mission-left">
<div class="mission-check"></div>
<div>
<div class="mission-text-title">Earn Boost</div>
<div class="mission-text-sub">Complete 3 tasks.</div>
</div>
</div>
<div class="mission-points">+300 EP</div>
</div>
<div class="mission-item" onclick="completeQuest(this, 800)">
<div class="mission-left">
<div class="mission-check"></div>
<div>
<div class="mission-text-title">Weekly Volume</div>
<div class="mission-text-sub">Transact $2000.</div>
</div>
</div>
<div class="mission-points">+800 EP</div>
</div>
<div class="mission-item" onclick="completeQuest(this, 200)">
<div class="mission-left">
<div class="mission-check"></div>
<div>
<div class="mission-text-title">Swap It Up</div>
<div class="mission-text-sub">Swap $10 on KittenSwap.</div>
</div>
</div>
<div class="mission-points">+200 EP</div>
</div>
<div class="mission-item" onclick="completeQuest(this, 1200)">
<div class="mission-left">
<div class="mission-check"></div>
<div>
<div class="mission-text-title">Hold all NFTs</div>
<div class="mission-text-sub">Own 1 from each listed collection.</div>
</div>
</div>
<div class="mission-points">+1200 EP</div>
</div>
</div>
</div>

<div class="card">
<div class="card-title"><span class="dot"></span> NFT Gallery</div>
<div class="nft-grid">
<div style="display:flex;flex-direction:column;align-items:center;" data-nft-index="0">
  <div class="nft-card">
    <strong>Wealthy Hypo Babies</strong>
  </div>
  <span class="nft-count" id="nft-0" style="margin-top:4px;font-size:10px;">0 owned</span>
</div>
<div style="display:flex;flex-direction:column;align-items:center;" data-nft-index="1">
  <div class="nft-card">
    <strong>Tiny Hyper Cats</strong>
  </div>
  <span class="nft-count" id="nft-1" style="margin-top:4px;font-size:10px;">0 owned</span>
</div>
<div style="display:flex;flex-direction:column;align-items:center;" data-nft-index="2">
  <div class="nft-card">
    <strong>Hypurr</strong>
  </div>
  <span class="nft-count" id="nft-2" style="margin-top:4px;font-size:10px;">0 owned</span>
</div>
<div style="display:flex;flex-direction:column;align-items:center;" data-nft-index="3">
  <div class="nft-card">
    <strong>Hyperian Genesis</strong>
  </div>
  <span class="nft-count" id="nft-3" style="margin-top:4px;font-size:10px;">0 owned</span>
</div>
<div style="display:flex;flex-direction:column;align-items:center;" data-nft-index="4">
  <div class="nft-card">
    <strong>CatKitSune</strong>
  </div>
  <span class="nft-count" id="nft-4" style="margin-top:4px;font-size:10px;">0 owned</span>
</div>
<div style="display:flex;flex-direction:column;align-items:center;" data-nft-index="5">
  <div class="nft-card">
    <strong>Illumeownati by Catbal</strong>
  </div>
  <span class="nft-count" id="nft-5" style="margin-top:4px;font-size:10px;">0 owned</span>
</div>
<div style="display:flex;flex-direction:column;align-items:center;" data-nft-index="6">
  <div class="nft-card">
    <strong>PiP & Friends</strong>
  </div>
  <span class="nft-count" id="nft-6" style="margin-top:4px;font-size:10px;">0 owned</span>
</div>
<div style="display:flex;flex-direction:column;align-items:center;" data-nft-index="7">
  <div class="nft-card">
    <strong>Hypers</strong>
  </div>
  <span class="nft-count" id="nft-7" style="margin-top:4px;font-size:10px;">0 owned</span>
</div>
<div style="display:flex;flex-direction:column;align-items:center;" data-nft-index="8">
  <div class="nft-card">
    <strong>Mechacats</strong>
  </div>
  <span class="nft-count" id="nft-8" style="margin-top:4px;font-size:10px;">0 owned</span>
</div>
<div style="display:flex;flex-direction:column;align-items:center;" data-nft-index="9">
  <div class="nft-card">
    <strong>LQnians</strong>
  </div>
  <span class="nft-count" id="nft-9" style="margin-top:4px;font-size:10px;">0 owned</span>
</div>
<div style="display:flex;flex-direction:column;align-items:center;" data-nft-index="10">
  <div class="nft-card">
    <strong>bald brÃ¶thers</strong>
  </div>
  <span class="nft-count" id="nft-10" style="margin-top:4px;font-size:10px;">0 owned</span>
</div>
<div style="display:flex;flex-direction:column;align-items:center;" data-nft-index="11">
  <div class="nft-card">
    <strong>BAE</strong>
  </div>
  <span class="nft-count" id="nft-11" style="margin-top:4px;font-size:10px;">0 owned</span>
</div>
<div style="display:flex;flex-direction:column;align-items:center;" data-nft-index="12">
  <div class="nft-card">
    <strong>Hypo</strong>
  </div>
  <span class="nft-count" id="nft-12" style="margin-top:4px;font-size:10px;">0 owned</span>
</div>
<div style="display:flex;flex-direction:column;align-items:center;" data-nft-index="13">
  <div class="nft-card">
    <strong>Locals Only by DEMI</strong>
  </div>
  <span class="nft-count" id="nft-13" style="margin-top:4px;font-size:10px;">0 owned</span>
</div>
<div style="display:flex;flex-direction:column;align-items:center;" data-nft-index="14">
  <div class="nft-card">
    <strong>Odd Otties</strong>
  </div>
  <span class="nft-count" id="nft-14" style="margin-top:4px;font-size:10px;">0 owned</span>
</div>
</div>
</div>
</div>
</div>
</div>
</main>

<!-- ROADMAP PAGE -->
<main class="view" id="view-roadmap">
<div class="hero-card">
<div class="hero-title">ğŸ—ºï¸ CatKitSune Roadmap</div>
<div class="hero-sub">Our journey and future plans</div>
</div>

<div class="top-nav">
<button class="top-nav-btn" onclick="showView(event, 'quests')">ğŸ®</button>
<button class="top-nav-btn active" onclick="showView(event, 'roadmap')">ğŸ—ºï¸</button>
<button class="top-nav-btn" onclick="showView(event, 'airdrop')">ğŸª‚</button>
<button class="top-nav-btn" onclick="showView(event, 'token')">ğŸª™</button>
<button class="top-nav-btn" onclick="showView(event, 'staking')">ğŸ’</button>
</div>

<div class="content-grid">
<div class="card">
<div class="card-title"><span class="dot"></span> Past Milestones</div>
<div style="display:flex;flex-direction:column;gap:16px;margin-top:12px;">

<div style="padding:16px;background:linear-gradient(135deg,#f0f9ff,#e0f2fe);border-radius:12px;border-left:4px solid #0ea5e9;">
<div style="font-weight:700;font-size:14px;color:#0369a1;margin-bottom:4px;">âœ… Q4 2024</div>
<div style="font-size:13px;color:#334155;line-height:1.5;">
â€¢ Project launch<br>
â€¢ Community building<br>
â€¢ Initial partnerships
</div>
</div>

<div style="padding:16px;background:linear-gradient(135deg,#f0fdf4,#dcfce7);border-radius:12px;border-left:4px solid #22c55e;">
<div style="font-weight:700;font-size:14px;color:#15803d;margin-bottom:4px;">âœ… Q1 2025</div>
<div style="font-size:13px;color:#334155;line-height:1.5;">
â€¢ Website launch<br>
â€¢ Quest system<br>
â€¢ NFT gallery integration
</div>
</div>

</div>
</div>

<div class="card">
<div class="card-title"><span class="dot"></span> Future Plans</div>
<div style="display:flex;flex-direction:column;gap:16px;margin-top:12px;">

<div style="padding:16px;background:linear-gradient(135deg,#faf5ff,#f3e8ff);border-radius:12px;border-left:4px solid #a855f7;">
<div style="font-weight:700;font-size:14px;color:#7c3aed;margin-bottom:4px;">ğŸ”„ Q2 2025</div>
<div style="font-size:13px;color:#334155;line-height:1.5;">
â€¢ Token launch (CKS)<br>
â€¢ DripTrade integration<br>
â€¢ Enhanced features
</div>
</div>

<div style="padding:16px;background:linear-gradient(135deg,#fff7ed,#ffedd5);border-radius:12px;border-left:4px solid #f97316;">
<div style="font-weight:700;font-size:14px;color:#c2410c;margin-bottom:4px;">ğŸ“… Q3 2025</div>
<div style="font-size:13px;color:#334155;line-height:1.5;">
â€¢ Airdrop campaign<br>
â€¢ Mobile app launch<br>
â€¢ Additional utilities
</div>
</div>

<div style="padding:16px;background:linear-gradient(135deg,#fef2f2,#fee2e2);border-radius:12px;border-left:4px solid #ef4444;">
<div style="font-weight:700;font-size:14px;color:#b91c1c;margin-bottom:4px;">ğŸš€ Q4 2025</div>
<div style="font-size:13px;color:#334155;line-height:1.5;">
â€¢ Major partnerships<br>
â€¢ Ecosystem expansion<br>
â€¢ Community governance
</div>
</div>

</div>
</div>

<div class="card">
<div style="text-align:center;padding:32px 20px;">
<div style="font-size:48px;margin-bottom:12px;">ğŸ”®</div>
<div style="font-size:18px;font-weight:700;color:#6a3df5;margin-bottom:8px;">Stay Tuned!</div>
<div style="font-size:13px;color:#6b7280;line-height:1.6;">
More details coming soon. Join our community to stay updated on the latest developments!
</div>
</div>
</div>
</div>
</main>

<!-- AIRDROP PAGE -->
<main class="view" id="view-airdrop">
<div class="hero-card">
<div class="hero-title">ğŸª‚ CKS Token Airdrop</div>
<div class="hero-sub">Earn rewards for your participation</div>
</div>

<div class="top-nav">
<button class="top-nav-btn" onclick="showView(event, 'quests')">ğŸ®</button>
<button class="top-nav-btn" onclick="showView(event, 'roadmap')">ğŸ—ºï¸</button>
<button class="top-nav-btn active" onclick="showView(event, 'airdrop')">ğŸª‚</button>
<button class="top-nav-btn" onclick="showView(event, 'token')">ğŸª™</button>
<button class="top-nav-btn" onclick="showView(event, 'staking')">ğŸ’</button>
</div>

<div class="content-grid">
<div class="card">
<div style="text-align:center;padding:40px 20px;">
<div style="font-size:64px;margin-bottom:16px;">ğŸ</div>
<div style="font-size:24px;font-weight:800;color:#6a3df5;margin-bottom:12px;">Airdrop Coming Soon!</div>
<div style="font-size:14px;color:#6b7280;line-height:1.6;max-width:500px;margin:0 auto 24px;">
Get ready for the CKS token airdrop! Complete quests, hold NFTs, and participate in the community to maximize your rewards.
</div>
<div style="display:inline-block;padding:12px 24px;background:linear-gradient(135deg,#6a3df5,#22c55e);color:white;border-radius:12px;font-weight:700;font-size:14px;">
ğŸ“… Details Announced Soon
</div>
</div>
</div>

<div class="quests-section">
<div class="card">
<div class="card-title"><span class="dot"></span> How to Participate</div>
<div class="mission-list">

<div class="mission-item">
<div class="mission-left">
<div style="font-size:24px;">âœ…</div>
<div>
<div class="mission-text-title">Complete Quests</div>
<div class="mission-text-sub">Earn points by completing tasks</div>
</div>
</div>
</div>

<div class="mission-item">
<div class="mission-left">
<div style="font-size:24px;">ğŸ–¼ï¸</div>
<div>
<div class="mission-text-title">Hold NFTs</div>
<div class="mission-text-sub">Own supported NFT collections</div>
</div>
</div>
</div>

<div class="mission-item">
<div class="mission-left">
<div style="font-size:24px;">ğŸ¦</div>
<div>
<div class="mission-text-title">Share Posts</div>
<div class="mission-text-sub">Spread the word on social media</div>
</div>
</div>
</div>

<div class="mission-item">
<div class="mission-left">
<div style="font-size:24px;">ğŸ‘¥</div>
<div>
<div class="mission-text-title">Invite Friends</div>
<div class="mission-text-sub">Use your referral link</div>
</div>
</div>
</div>

</div>
</div>

<div class="card">
<div class="card-title"><span class="dot"></span> Airdrop Details</div>
<div style="display:flex;flex-direction:column;gap:12px;margin-top:12px;">

<div style="padding:14px;background:#f9fafb;border-radius:10px;border-left:3px solid #6a3df5;">
<div style="font-weight:700;font-size:12px;color:#6a3df5;margin-bottom:4px;">SNAPSHOT DATE</div>
<div style="font-size:13px;color:#6b7280;">To be announced</div>
</div>

<div style="padding:14px;background:#f9fafb;border-radius:10px;border-left:3px solid #22c55e;">
<div style="font-weight:700;font-size:12px;color:#22c55e;margin-bottom:4px;">DISTRIBUTION</div>
<div style="font-size:13px;color:#6b7280;">Based on points & activity</div>
</div>

<div style="padding:14px;background:#f9fafb;border-radius:10px;border-left:3px solid #f59e0b;">
<div style="font-weight:700;font-size:12px;color:#f59e0b;margin-bottom:4px;">REQUIREMENTS</div>
<div style="font-size:13px;color:#6b7280;">Active participation required</div>
</div>

</div>
</div>
</div>

<div class="card">
<div style="background:linear-gradient(135deg,#667eea,#764ba2);border-radius:12px;padding:24px;text-align:center;color:white;">
<div style="font-size:18px;font-weight:700;margin-bottom:8px;">ğŸ“¢ Stay Updated!</div>
<div style="font-size:13px;opacity:0.9;margin-bottom:16px;">Follow us on Twitter for the latest announcements</div>
<div style="display:flex;gap:8px;justify-content:center;flex-wrap:wrap;">
<a href="https://x.com/GborSzakl1" target="_blank" style="padding:8px 16px;background:rgba(255,255,255,0.2);border-radius:8px;color:white;text-decoration:none;font-weight:600;font-size:12px;backdrop-filter:blur(10px);">@GborSzakl1</a>
<a href="https://x.com/MariannCso1714" target="_blank" style="padding:8px 16px;background:rgba(255,255,255,0.2);border-radius:8px;color:white;text-decoration:none;font-weight:600;font-size:12px;backdrop-filter:blur(10px);">@MariannCso1714</a>
</div>
</div>
</div>
</div>
</main>

<!-- CKS TOKEN PAGE -->
<main class="view" id="view-token">
<div class="hero-card">
<div class="hero-title">ğŸª™ CKS Token</div>
<div class="hero-sub">The native token of the CatKitSune ecosystem</div>
</div>

<div class="top-nav">
<button class="top-nav-btn" onclick="showView(event, 'quests')">ğŸ®</button>
<button class="top-nav-btn" onclick="showView(event, 'roadmap')">ğŸ—ºï¸</button>
<button class="top-nav-btn" onclick="showView(event, 'airdrop')">ğŸª‚</button>
<button class="top-nav-btn active" onclick="showView(event, 'token')">ğŸª™</button>
<button class="top-nav-btn" onclick="showView(event, 'staking')">ğŸ’</button>
</div>

<div class="content-grid">
<div class="card">
<div style="text-align:center;padding:32px 20px;">
<div style="font-size:56px;margin-bottom:16px;">ğŸ’</div>
<div style="font-size:20px;font-weight:800;color:#6a3df5;margin-bottom:8px;">CatKitSune Token (CKS)</div>
<div style="font-size:13px;color:#6b7280;line-height:1.6;max-width:600px;margin:0 auto;">
The CKS token powers the entire CatKitSune ecosystem, providing utility, governance, and rewards for our community members.
</div>
</div>
</div>

<div class="quests-section">
<div class="card">
<div class="card-title"><span class="dot"></span> Token Information</div>
<div style="display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin-top:12px;">

<div style="padding:16px;background:linear-gradient(135deg,#f0f9ff,#e0f2fe);border-radius:10px;text-align:center;">
<div style="font-size:11px;color:#0369a1;font-weight:600;margin-bottom:4px;">TOKEN NAME</div>
<div style="font-size:16px;font-weight:700;color:#111827;">CatKitSune</div>
</div>

<div style="padding:16px;background:linear-gradient(135deg,#f0fdf4,#dcfce7);border-radius:10px;text-align:center;">
<div style="font-size:11px;color:#15803d;font-weight:600;margin-bottom:4px;">SYMBOL</div>
<div style="font-size:16px;font-weight:700;color:#111827;">CKS</div>
</div>

<div style="padding:16px;background:linear-gradient(135deg,#faf5ff,#f3e8ff);border-radius:10px;text-align:center;">
<div style="font-size:11px;color:#7c3aed;font-weight:600;margin-bottom:4px;">TOTAL SUPPLY</div>
<div style="font-size:16px;font-weight:700;color:#111827;">TBA</div>
</div>

<div style="padding:16px;background:linear-gradient(135deg,#fff7ed,#ffedd5);border-radius:10px;text-align:center;">
<div style="font-size:11px;color:#c2410c;font-weight:600;margin-bottom:4px;">NETWORK</div>
<div style="font-size:16px;font-weight:700;color:#111827;">Hyperliquid</div>
</div>

</div>

<div style="margin-top:16px;padding:14px;background:#fef3c7;border-radius:10px;border-left:3px solid #f59e0b;">
<div style="font-weight:700;font-size:12px;color:#92400e;margin-bottom:4px;">ğŸ“ CONTRACT ADDRESS</div>
<div style="font-size:12px;color:#78350f;font-family:monospace;word-break:break-all;">To be announced</div>
</div>
</div>

<div class="card">
<div class="card-title"><span class="dot"></span> Tokenomics</div>
<div style="display:flex;flex-direction:column;gap:10px;margin-top:12px;">

<div style="padding:12px;background:#f9fafb;border-radius:8px;display:flex;justify-content:space-between;align-items:center;">
<div style="font-size:13px;font-weight:600;color:#334155;">Community & Airdrop</div>
<div style="font-size:14px;font-weight:700;color:#6a3df5;">TBA%</div>
</div>

<div style="padding:12px;background:#f9fafb;border-radius:8px;display:flex;justify-content:space-between;align-items:center;">
<div style="font-size:13px;font-weight:600;color:#334155;">Liquidity</div>
<div style="font-size:14px;font-weight:700;color:#22c55e;">TBA%</div>
</div>

<div style="padding:12px;background:#f9fafb;border-radius:8px;display:flex;justify-content:space-between;align-items:center;">
<div style="font-size:13px;font-weight:600;color:#334155;">Team & Development</div>
<div style="font-size:14px;font-weight:700;color:#f59e0b;">TBA%</div>
</div>

<div style="padding:12px;background:#f9fafb;border-radius:8px;display:flex;justify-content:space-between;align-items:center;">
<div style="font-size:13px;font-weight:600;color:#334155;">Marketing & Partnerships</div>
<div style="font-size:14px;font-weight:700;color:#ef4444;">TBA%</div>
</div>

</div>
</div>
</div>

<div class="card">
<div class="card-title"><span class="dot"></span> Utility & Use Cases</div>
<div class="mission-list">

<div class="mission-item">
<div class="mission-left">
<div style="font-size:24px;">ğŸ®</div>
<div>
<div class="mission-text-title">Ecosystem Access</div>
<div class="mission-text-sub">Use CKS for platform features and services</div>
</div>
</div>
</div>

<div class="mission-item">
<div class="mission-left">
<div style="font-size:24px;">ğŸ—³ï¸</div>
<div>
<div class="mission-text-title">Governance</div>
<div class="mission-text-sub">Vote on important platform decisions</div>
</div>
</div>
</div>

<div class="mission-item">
<div class="mission-left">
<div style="font-size:24px;">ğŸ’°</div>
<div>
<div class="mission-text-title">Staking Rewards</div>
<div class="mission-text-sub">Earn passive income by staking CKS</div>
</div>
</div>
</div>

<div class="mission-item">
<div class="mission-left">
<div style="font-size:24px;">ğŸ</div>
<div>
<div class="mission-text-title">NFT Benefits</div>
<div class="mission-text-sub">Exclusive perks for CKS holders</div>
</div>
</div>
</div>

</div>
</div>

<div class="card">
<div style="background:linear-gradient(135deg,#667eea,#764ba2);border-radius:12px;padding:28px 24px;text-align:center;color:white;">
<div style="font-size:20px;font-weight:700;margin-bottom:12px;">ğŸš€ Token Launch Soon</div>
<div style="font-size:14px;opacity:0.95;margin-bottom:20px;line-height:1.6;">
More detailed information about the CKS token will be announced soon. Stay connected with our community for updates!
</div>
<div style="font-size:12px;opacity:0.8;">
Complete quests now to maximize your airdrop allocation!
</div>
</div>
</div>
</div>
</main>

<!-- NFT STAKING PAGE -->
<main class="view" id="view-staking">
<div class="hero-card">
<div class="hero-title">ğŸ’ NFT Staking</div>
<div class="hero-sub">Stake your CatKitSune NFTs and earn rewards</div>
</div>

<div class="top-nav">
<button class="top-nav-btn" onclick="showView(event, 'quests')">ğŸ®</button>
<button class="top-nav-btn" onclick="showView(event, 'roadmap')">ğŸ—ºï¸</button>
<button class="top-nav-btn" onclick="showView(event, 'airdrop')">ğŸª‚</button>
<button class="top-nav-btn" onclick="showView(event, 'token')">ğŸª™</button>
<button class="top-nav-btn active" onclick="showView(event, 'staking')">ğŸ’</button>
</div>

<div class="content-grid">

<!-- Warning Banner -->
<div style="background:#fff3cd;border:1px solid #ffc107;border-radius:8px;padding:10px;margin-bottom:12px;font-size:12px;color:#856404;">
âš ï¸ <strong>Not Live Yet</strong> - NFT Staking is currently in development
</div>

<!-- Staking Stats -->
<div class="card">
<div style="display:grid;grid-template-columns:repeat(3,1fr);gap:16px;">
<div style="text-align:center;padding:16px;background:linear-gradient(135deg,#f0f9ff,#e0f2fe);border-radius:12px;">
<div style="font-size:11px;color:#0369a1;font-weight:600;margin-bottom:4px;">STAKED NFTs</div>
<div style="font-size:24px;font-weight:700;color:#111827;" id="totalStaked">0</div>
</div>
<div style="text-align:center;padding:16px;background:linear-gradient(135deg,#f0fdf4,#dcfce7);border-radius:12px;">
<div style="font-size:11px;color:#15803d;font-weight:600;margin-bottom:4px;">DAILY REWARDS</div>
<div style="font-size:24px;font-weight:700;color:#111827;" id="dailyRewards">0 CKS</div>
</div>
<div style="text-align:center;padding:16px;background:linear-gradient(135deg,#faf5ff,#f3e8ff);border-radius:12px;">
<div style="font-size:11px;color:#7c3aed;font-weight:600;margin-bottom:4px;">PENDING REWARDS</div>
<div style="font-size:24px;font-weight:700;color:#111827;" id="pendingRewards">0 CKS</div>
</div>
</div>
</div>

<!-- CatKitSune Series 1 -->
<div class="card">
<div class="card-title"><span class="dot"></span> CatKitSune Series 1</div>
<div style="display:grid;grid-template-columns:repeat(5,1fr);gap:12px;margin-top:16px;">
<div class="nft-stake-slot" data-series="1" data-slot="1">
<div style="width:100%;height:120px;border:2px dashed #d4d4d8;border-radius:12px;display:flex;align-items:center;justify-content:center;background:#f9fafb;cursor:pointer;transition:all 0.3s;" onmouseover="this.style.borderColor='#6a3df5';this.style.background='#f6ecff'" onmouseout="this.style.borderColor='#d4d4d8';this.style.background='#f9fafb'">
<div style="text-align:center;">
<div style="font-size:32px;margin-bottom:4px;">ğŸ“¥</div>
<div style="font-size:10px;color:#6b7280;font-weight:600;">Empty Slot</div>
</div>
</div>
</div>
<div class="nft-stake-slot" data-series="1" data-slot="2">
<div style="width:100%;height:120px;border:2px dashed #d4d4d8;border-radius:12px;display:flex;align-items:center;justify-content:center;background:#f9fafb;cursor:pointer;transition:all 0.3s;" onmouseover="this.style.borderColor='#6a3df5';this.style.background='#f6ecff'" onmouseout="this.style.borderColor='#d4d4d8';this.style.background='#f9fafb'">
<div style="text-align:center;">
<div style="font-size:32px;margin-bottom:4px;">ğŸ“¥</div>
<div style="font-size:10px;color:#6b7280;font-weight:600;">Empty Slot</div>
</div>
</div>
</div>
<div class="nft-stake-slot" data-series="1" data-slot="3">
<div style="width:100%;height:120px;border:2px dashed #d4d4d8;border-radius:12px;display:flex;align-items:center;justify-content:center;background:#f9fafb;cursor:pointer;transition:all 0.3s;" onmouseover="this.style.borderColor='#6a3df5';this.style.background='#f6ecff'" onmouseout="this.style.borderColor='#d4d4d8';this.style.background='#f9fafb'">
<div style="text-align:center;">
<div style="font-size:32px;margin-bottom:4px;">ğŸ“¥</div>
<div style="font-size:10px;color:#6b7280;font-weight:600;">Empty Slot</div>
</div>
</div>
</div>
<div class="nft-stake-slot" data-series="1" data-slot="4">
<div style="width:100%;height:120px;border:2px dashed #d4d4d8;border-radius:12px;display:flex;align-items:center;justify-content:center;background:#f9fafb;cursor:pointer;transition:all 0.3s;" onmouseover="this.style.borderColor='#6a3df5';this.style.background='#f6ecff'" onmouseout="this.style.borderColor='#d4d4d8';this.style.background='#f9fafb'">
<div style="text-align:center;">
<div style="font-size:32px;margin-bottom:4px;">ğŸ“¥</div>
<div style="font-size:10px;color:#6b7280;font-weight:600;">Empty Slot</div>
</div>
</div>
</div>
<div class="nft-stake-slot" data-series="1" data-slot="5">
<div style="width:100%;height:120px;border:2px dashed #d4d4d8;border-radius:12px;display:flex;align-items:center;justify-content:center;background:#f9fafb;cursor:pointer;transition:all 0.3s;" onmouseover="this.style.borderColor='#6a3df5';this.style.background='#f6ecff'" onmouseout="this.style.borderColor='#d4d4d8';this.style.background='#f9fafb'">
<div style="text-align:center;">
<div style="font-size:32px;margin-bottom:4px;">ğŸ“¥</div>
<div style="font-size:10px;color:#6b7280;font-weight:600;">Empty Slot</div>
</div>
</div>
</div>
</div>
<div style="margin-top:12px;padding:12px;background:#fef3c7;border-radius:10px;border-left:3px solid #f59e0b;font-size:12px;color:#78350f;">
<strong>ğŸ’° Rewards:</strong> 10 CKS per NFT per day
</div>
</div>

<!-- CatKitSune Series 2 -->
<div class="card">
<div class="card-title"><span class="dot"></span> CatKitSune Series 2 ğŸ”’</div>
<div style="display:grid;grid-template-columns:repeat(5,1fr);gap:12px;margin-top:16px;">
<div class="nft-stake-slot" data-series="2" data-slot="1">
<div style="width:100%;height:120px;border:2px dashed #d4d4d8;border-radius:12px;display:flex;align-items:center;justify-content:center;background:#f9fafb;opacity:0.6;">
<div style="text-align:center;">
<div style="font-size:32px;margin-bottom:4px;">ğŸ”’</div>
<div style="font-size:10px;color:#6b7280;font-weight:600;">Locked</div>
</div>
</div>
</div>
<div class="nft-stake-slot" data-series="2" data-slot="2">
<div style="width:100%;height:120px;border:2px dashed #d4d4d8;border-radius:12px;display:flex;align-items:center;justify-content:center;background:#f9fafb;opacity:0.6;">
<div style="text-align:center;">
<div style="font-size:32px;margin-bottom:4px;">ğŸ”’</div>
<div style="font-size:10px;color:#6b7280;font-weight:600;">Locked</div>
</div>
</div>
</div>
<div class="nft-stake-slot" data-series="2" data-slot="3">
<div style="width:100%;height:120px;border:2px dashed #d4d4d8;border-radius:12px;display:flex;align-items:center;justify-content:center;background:#f9fafb;opacity:0.6;">
<div style="text-align:center;">
<div style="font-size:32px;margin-bottom:4px;">ğŸ”’</div>
<div style="font-size:10px;color:#6b7280;font-weight:600;">Locked</div>
</div>
</div>
</div>
<div class="nft-stake-slot" data-series="2" data-slot="4">
<div style="width:100%;height:120px;border:2px dashed #d4d4d8;border-radius:12px;display:flex;align-items:center;justify-content:center;background:#f9fafb;opacity:0.6;">
<div style="text-align:center;">
<div style="font-size:32px;margin-bottom:4px;">ğŸ”’</div>
<div style="font-size:10px;color:#6b7280;font-weight:600;">Locked</div>
</div>
</div>
</div>
<div class="nft-stake-slot" data-series="2" data-slot="5">
<div style="width:100%;height:120px;border:2px dashed #d4d4d8;border-radius:12px;display:flex;align-items:center;justify-content:center;background:#f9fafb;opacity:0.6;">
<div style="text-align:center;">
<div style="font-size:32px;margin-bottom:4px;">ğŸ”’</div>
<div style="font-size:10px;color:#6b7280;font-weight:600;">Locked</div>
</div>
</div>
</div>
</div>
<div style="margin-top:12px;padding:12px;background:#f3f4f6;border-radius:10px;border-left:3px solid #9ca3af;font-size:12px;color:#4b5563;">
<strong>ğŸ”’ Locked:</strong> Complete Series 1 to unlock (15 CKS per NFT per day)
</div>
</div>

<!-- CatKitSune Series 3 -->
<div class="card">
<div class="card-title"><span class="dot"></span> CatKitSune Series 3 ğŸ”’</div>
<div style="display:grid;grid-template-columns:repeat(5,1fr);gap:12px;margin-top:16px;">
<div class="nft-stake-slot" data-series="3" data-slot="1">
<div style="width:100%;height:120px;border:2px dashed #d4d4d8;border-radius:12px;display:flex;align-items:center;justify-content:center;background:#f9fafb;opacity:0.6;">
<div style="text-align:center;">
<div style="font-size:32px;margin-bottom:4px;">ğŸ”’</div>
<div style="font-size:10px;color:#6b7280;font-weight:600;">Locked</div>
</div>
</div>
</div>
<div class="nft-stake-slot" data-series="3" data-slot="2">
<div style="width:100%;height:120px;border:2px dashed #d4d4d8;border-radius:12px;display:flex;align-items:center;justify-content:center;background:#f9fafb;opacity:0.6;">
<div style="text-align:center;">
<div style="font-size:32px;margin-bottom:4px;">ğŸ”’</div>
<div style="font-size:10px;color:#6b7280;font-weight:600;">Locked</div>
</div>
</div>
</div>
<div class="nft-stake-slot" data-series="3" data-slot="3">
<div style="width:100%;height:120px;border:2px dashed #d4d4d8;border-radius:12px;display:flex;align-items:center;justify-content:center;background:#f9fafb;opacity:0.6;">
<div style="text-align:center;">
<div style="font-size:32px;margin-bottom:4px;">ğŸ”’</div>
<div style="font-size:10px;color:#6b7280;font-weight:600;">Locked</div>
</div>
</div>
</div>
<div class="nft-stake-slot" data-series="3" data-slot="4">
<div style="width:100%;height:120px;border:2px dashed #d4d4d8;border-radius:12px;display:flex;align-items:center;justify-content:center;background:#f9fafb;opacity:0.6;">
<div style="text-align:center;">
<div style="font-size:32px;margin-bottom:4px;">ğŸ”’</div>
<div style="font-size:10px;color:#6b7280;font-weight:600;">Locked</div>
</div>
</div>
</div>
<div class="nft-stake-slot" data-series="3" data-slot="5">
<div style="width:100%;height:120px;border:2px dashed #d4d4d8;border-radius:12px;display:flex;align-items:center;justify-content:center;background:#f9fafb;opacity:0.6;">
<div style="text-align:center;">
<div style="font-size:32px;margin-bottom:4px;">ğŸ”’</div>
<div style="font-size:10px;color:#6b7280;font-weight:600;">Locked</div>
</div>
</div>
</div>
</div>
<div style="margin-top:12px;padding:12px;background:#f3f4f6;border-radius:10px;border-left:3px solid #9ca3af;font-size:12px;color:#4b5563;">
<strong>ğŸ”’ Locked:</strong> Complete Series 2 to unlock (20 CKS per NFT per day)
</div>
</div>

<!-- Claim Rewards Button -->
<div class="card">
<div style="text-align:center;padding:24px;">
<button style="padding:14px 32px;background:linear-gradient(135deg,#6a3df5,#22c55e);color:white;border:none;border-radius:12px;font-size:16px;font-weight:700;cursor:pointer;transition:all 0.3s;box-shadow:0 4px 12px rgba(106,61,245,0.3);" onmouseover="this.style.transform='translateY(-2px)';this.style.boxShadow='0 8px 20px rgba(106,61,245,0.4)'" onmouseout="this.style.transform='translateY(0)';this.style.boxShadow='0 4px 12px rgba(106,61,245,0.3)'">
ğŸ Claim All Rewards
</button>
<div style="margin-top:12px;font-size:12px;color:#6b7280;">
Connect your wallet to stake NFTs and earn rewards
</div>
</div>
</div>

</div>
</main>

</div><!-- /views-container -->

</div><!-- /app -->

<script>
let walletConnected = false;
let walletAddress = '';
let totalPoints = 0;
let completedCount = 0;
let nftPointsEarned = 0;

function showView(event, viewName) {
  document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
  document.querySelectorAll('.top-nav-btn').forEach(btn => btn.classList.remove('active'));
  document.getElementById('view-' + viewName).classList.add('active');
  if (event && event.target) event.target.classList.add('active');
  
  // Scroll to top when switching views
  window.scrollTo({ top: 0, behavior: 'smooth' });
}

async function connectWallet() {
  if (typeof window.ethereum === 'undefined') {
    alert('ğŸ¦Š Please install MetaMask!\n\nDownload: https://metamask.io');
    window.open('https://metamask.io/download/', '_blank');
    return;
  }
  
  try {
    console.log('ğŸ”— Requesting wallet connection...');
    
    const accounts = await window.ethereum.request({ 
      method: 'eth_requestAccounts' 
    });
    
    if (accounts.length === 0) {
      showNotification('âŒ No wallet selected!');
      return;
    }
    
    walletAddress = accounts[0];
    walletConnected = true;
    updateWalletButton();
    updateReferralLink();
    showNotification('âœ… Wallet connected!');
    
    console.log('âœ… Wallet connected:', walletAddress);
    
    // NFT balances check
    showNotification('ğŸ” Checking NFT balances...');
    await checkNFTBalances();
  } catch (error) {
    console.error('âŒ Wallet connection error:', error);
    if (error.code === 4001) {
      showNotification('âŒ Connection rejected');
    } else {
      showNotification('âŒ Error: ' + error.message);
    }
  }
}

function disconnectWallet() {
  walletConnected = false;
  walletAddress = '';
  document.getElementById('walletText').textContent = 'Connect Wallet';
  document.getElementById('walletBtn').style.background = '#f9fafb';
  document.getElementById('walletBtn').style.borderColor = '#e5e7eb';
  sessionStorage.removeItem('wallet_address');
  showNotification('ğŸ‘‹ Wallet disconnected');
}

function updateWalletButton() {
  const shortAddress = walletAddress.slice(0, 6) + '...' + walletAddress.slice(-4);
  document.getElementById('walletText').textContent = shortAddress;
  document.getElementById('walletBtn').style.background = 'linear-gradient(135deg, #e2d6ff, #d6f5e3)';
  document.getElementById('walletBtn').style.borderColor = '#6a3df5';
  sessionStorage.setItem('wallet_address', walletAddress);
}

function toggleWallet() {
  if (walletConnected) {
    if (confirm('ğŸ”Œ Disconnect wallet?')) disconnectWallet();
  } else {
    connectWallet();
  }
}

function loginWithTwitter() {
  // Redirect to Twitter OAuth endpoint
  window.location.href = "https://catkitsune.xyz/api/twitter-login";
}

async function loadTwitterUser() {
  // Check for OAuth callback params
  const urlParams = new URLSearchParams(window.location.search);
  const name = urlParams.get('name');
  const username = urlParams.get('username');
  const avatar = urlParams.get('avatar');
  
  if (username && avatar) {
    // OAuth callback - save user data
    const decodedAvatar = decodeURIComponent(avatar);
    const decodedUsername = decodeURIComponent(username);
    const decodedName = name ? decodeURIComponent(name) : decodedUsername;
    
    document.getElementById('twitterBtn').style.display = 'none';
    const av = document.getElementById('twitterAvatar');
    av.innerHTML = `
      <img src="${decodedAvatar}" style="width:30px;height:30px;border-radius:50%;border:2px solid #1da1f2;">
      <span style="font-weight:600;">@${decodedUsername}</span>
    `;
    av.style.display = 'flex';
    
    sessionStorage.setItem('twitter_user', JSON.stringify({
      name: decodedName,
      username: decodedUsername,
      avatar: decodedAvatar
    }));
    
    showNotification(`ğŸ¦ Logged in as @${decodedUsername}`);
    console.log('âœ… Twitter OAuth success:', decodedUsername);
    
    // Clean URL
    window.history.replaceState({}, document.title, window.location.pathname);
    return;
  }
  
  // Check for saved user
  const savedUser = sessionStorage.getItem('twitter_user');
  if (savedUser) {
    try {
      const user = JSON.parse(savedUser);
      document.getElementById('twitterBtn').style.display = 'none';
      const av = document.getElementById('twitterAvatar');
      av.innerHTML = `
        <img src="${user.avatar}" style="width:30px;height:30px;border-radius:50%;border:2px solid #1da1f2;">
        <span style="font-weight:600;">@${user.username}</span>
      `;
      av.style.display = 'flex';
      console.log('âœ… Loaded saved Twitter user:', user.username);
    } catch (e) {
      console.error('Error loading Twitter user:', e);
    }
  }
}

function completeQuest(element, points) {
  const checkbox = element.querySelector('.mission-check');
  if (checkbox.classList.contains('completed')) return;
  
  checkbox.classList.add('completed');
  element.style.opacity = '0.7';
  element.style.pointerEvents = 'none';
  
  totalPoints += points;
  completedCount++;
  
  document.getElementById('totalPoints').textContent = totalPoints;
  document.getElementById('completedQuests').textContent = completedCount;
  
  showNotification(`+${points} EP earned! ğŸ‰`);
}

function copyReferralLink() {
  const input = document.getElementById('referralLink');
  input.select();
  navigator.clipboard.writeText(input.value).then(() => {
    showNotification('ğŸ”— Link copied!');
  });
}

function updateReferralLink() {
  if (walletAddress) {
    let userId = sessionStorage.getItem('user_ref_id');
    if (!userId) {
      userId = Math.floor(Math.random() * 9999) + 1;
      sessionStorage.setItem('user_ref_id', userId);
      if (!localStorage.getItem(`ref_count_${userId}`)) {
        localStorage.setItem(`ref_count_${userId}`, '0');
      }
    }
    document.getElementById('referralLink').value = `https://catkitsune.com/?ref=${userId}`;
    document.getElementById('referralStats').style.display = 'block';
    updateReferralStats();
  }
}

function checkReferralCode() {
  const urlParams = new URLSearchParams(window.location.search);
  const refCode = urlParams.get('ref');
  
  if (refCode && !sessionStorage.getItem('referred_by')) {
    sessionStorage.setItem('referred_by', refCode);
    const currentCount = parseInt(localStorage.getItem(`ref_count_${refCode}`) || '0');
    localStorage.setItem(`ref_count_${refCode}`, (currentCount + 1).toString());
    showNotification(`ğŸ‰ Referred by user #${refCode}!`);
  }
}

function updateReferralStats() {
  const userId = sessionStorage.getItem('user_ref_id');
  if (!userId) return;
  
  const refCount = parseInt(localStorage.getItem(`ref_count_${userId}`) || '0');
  const refPoints = refCount * 1;
  
  document.getElementById('refCount').textContent = refCount;
  document.getElementById('refPoints').textContent = refPoints + ' EP';
  
  totalPoints = (nftPointsEarned || 0) + completedCount + refPoints;
  document.getElementById('totalPoints').textContent = totalPoints;
}

function showNotification(message) {
  const notification = document.createElement('div');
  notification.style.cssText = `
    position: fixed; top: 80px; right: 20px;
    background: linear-gradient(135deg, #6a3df5, #22c55e);
    color: white; padding: 12px 20px; border-radius: 12px;
    font-weight: 600; font-size: 14px; z-index: 1000;
    box-shadow: 0 10px 30px rgba(106, 61, 245, 0.3);
  `;
  notification.textContent = message;
  document.body.appendChild(notification);
  setTimeout(() => notification.remove(), 3000);
}

// Twitter Share Verification
function verifyTwitterShare(tweetNumber) {
  // Check if already verified
  const verifyKey = `twitter_share_${tweetNumber}_verified`;
  if (sessionStorage.getItem(verifyKey)) {
    showNotification('âš ï¸ You already verified this tweet!');
    return;
  }
  
  // TODO: In production, verify with Twitter API
  // For now, trust-based system
  
  // Mark as verified
  sessionStorage.setItem(verifyKey, 'true');
  
  // Award point
  totalPoints += 1;
  completedCount += 1;
  
  document.getElementById('totalPoints').textContent = totalPoints;
  document.getElementById('completedQuests').textContent = completedCount;
  
  showNotification(`ğŸ‰ +1 EP for sharing Tweet #${tweetNumber}!`);
  
  console.log(`âœ… Twitter share #${tweetNumber} verified`);
}

// LEADERBOARD
const baseNames = [
  "Emma Johnson", "Liam Smith", "Olivia Williams", "Noah Brown", "Ava Jones",
  "Ethan Garcia", "Sophia Martinez", "Mason Rodriguez", "Isabella Lee", "Lucas Anderson",
  "Mia Taylor", "Oliver Thomas", "Charlotte Moore", "Elijah Jackson", "Amelia White",
  "James Harris", "Harper Clark", "Benjamin Lewis", "Evelyn Walker", "Logan Hall",
  "Abigail Allen", "Alexander Young", "Emily King", "Michael Wright", "Elizabeth Lopez",
  "Daniel Hill", "Sofia Scott", "Matthew Green", "Avery Adams", "Henry Baker"
];

function generateRandomPlayers() {
  const players = [];
  for (let i = 0; i < 500; i++) {
    const name = baseNames[i % baseNames.length] + (i >= 30 ? ` ${Math.floor(i/30)}` : '');
    const randomAddress = '0x' + Math.random().toString(16).substring(2, 15);
    const points = Math.floor(Math.random() * 50000) + 20000;
    const avatar = `https://api.dicebear.com/7.x/avataaars/svg?seed=${encodeURIComponent(name)}`;
    players.push({ name, address: randomAddress, points, avatar });
  }
  return players.sort((a, b) => b.points - a.points);
}

const leaderboardData = generateRandomPlayers();
let filteredQuestsData = [...leaderboardData];

function generateQuestsLeaderboard() {
  const container = document.getElementById('questsLeaderboardRows');
  if (!container) {
    console.error('âŒ Leaderboard container not found!');
    return;
  }
  
  const currentUser = walletAddress ? walletAddress.toLowerCase() : '';
  filteredQuestsData.sort((a, b) => b.points - a.points);
  
  console.log('âœ… Generating leaderboard:', filteredQuestsData.length, 'players');
  
  container.innerHTML = filteredQuestsData.map((player, index) => {
    const rank = index + 1;
    const medal = rank === 1 ? 'ğŸ¥‡' : rank === 2 ? 'ğŸ¥ˆ' : rank === 3 ? 'ğŸ¥‰' : '';
    const isCurrentUser = player.address.toLowerCase() === currentUser;
    
    return `
      <div style="display:grid;grid-template-columns:80px 1.2fr 2fr 1fr;gap:12px;padding:14px 16px;border-bottom:1px solid #f3f4f6;font-size:13px;align-items:center;${isCurrentUser ? 'background:#f2ecff;border-left:3px solid #6a3df5;' : ''}">
        <div style="font-weight:700;">
          ${medal ? `<span style="font-size:18px;">${medal}</span>` : `#${rank}`}
        </div>
        <div style="font-weight:600;display:flex;align-items:center;gap:6px;">
          <img src="${player.avatar}" style="width:24px;height:24px;border-radius:50%;">
          ${player.name}
        </div>
        <div style="font-family:monospace;font-size:12px;color:#6b7280;">${player.address}</div>
        <div style="text-align:right;font-weight:700;color:#6a3df5;">${player.points} EP</div>
      </div>
    `;
  }).join('');
  
  console.log('âœ… Leaderboard generated!');
}

function filterQuestsLeaderboard() {
  const searchTerm = document.getElementById('questsLeaderboardSearch').value.toLowerCase();
  
  if (!searchTerm) {
    filteredQuestsData = [...leaderboardData];
  } else {
    filteredQuestsData = leaderboardData.filter(player => 
      player.name.toLowerCase().includes(searchTerm) ||
      player.address.toLowerCase().includes(searchTerm)
    );
  }
  
  generateQuestsLeaderboard();
}

// NFT BALANCE CHECK
const NFT_COLLECTIONS = [
  { 
    name: 'Wealthy Hypo Babies', 
    address: '0x63eb9d77D083cA10C304E28d5191321977fd0Bfb', 
    pointsPerNFT: 1, 
    galleryIndex: 0,
    image: 'https://pbs.twimg.com/profile_images/1876004126938537984/qpRkjcAX_400x400.jpg'
  },
  { 
    name: 'Tiny Hyper Cats', 
    address: '0xCC3D60fF11a268606C6a57bD6Db74b4208f1D30c', 
    pointsPerNFT: 1, 
    galleryIndex: 1,
    image: 'https://static.drip.trade/collections/tiny-hyper-cat_pfp.jpg'
  },
  { 
    name: 'Hypurr', 
    address: '0x9125E2d6827a00B0F8330D6ef7BEF07730Bac685', 
    pointsPerNFT: 1, 
    galleryIndex: 2,
    image: 'https://static.drip.trade/collections/hypurr_pfp.jpg'
  },
  { 
    name: 'Hyperian Genesis', 
    address: '0xB0F82655F249FC6561A94eB370d41bD24A861A9d', 
    pointsPerNFT: 1, 
    galleryIndex: 3,
    image: 'https://static.drip.trade/collections/hyperian-genesis_pfp.png'
  },
  { 
    name: 'Illumeownati by Catbal', 
    address: '0xDdaB956F9EeE629510B4410627cd63C0448A78aB', 
    pointsPerNFT: 1, 
    galleryIndex: 5,
    image: 'https://static.drip.trade/collections/illumeownati_pfp.png'
  },
  { 
    name: 'PiP & Friends', 
    address: '0xbc4a26ba78ce05E8bCbF069Bbb87FB3E1dAC8DF8', 
    pointsPerNFT: 1, 
    galleryIndex: 6,
    image: 'https://static.drip.trade/collections/pip_pfp.jpg'
  },
  { 
    name: 'Hypers', 
    address: '0x8A3bda085fD13E71FA2851D7a4b4B8af9671c5aB', 
    pointsPerNFT: 1, 
    galleryIndex: 7,
    image: 'https://static.drip.trade/collections/hypers_pfp.png'
  },
  { 
    name: 'Mechacats', 
    address: '0xeA8Cc2a7da4E91c559514B8192eF1cfe1497AC74', 
    pointsPerNFT: 1, 
    galleryIndex: 8,
    image: 'https://static.drip.trade/collections/mechacats_pfp.png'
  },
  { 
    name: 'LQnians', 
    address: '0xfD43e36a9D4002C54a84DAB089a2EdE92ffB5C60', 
    pointsPerNFT: 1, 
    galleryIndex: 9,
    image: 'https://static.drip.trade/collections/lqna_pfp.png'
  },
  { 
    name: 'bald brÃ¶thers', 
    address: '0x7d87FfB185Fc27Cbee62468A9b5eA00d538b74A6', 
    pointsPerNFT: 1, 
    galleryIndex: 10,
    image: 'https://static.drip.trade/collections/bald-brothers_pfp.png'
  },
  { 
    name: 'BAE', 
    address: '0x31ce9E3Fd78B593c2F37f62AE0fa72A23a2472df', 
    pointsPerNFT: 1, 
    galleryIndex: 11,
    image: 'https://static.drip.trade/collections/bae_pfp.png'
  },
  { 
    name: 'Hypo', 
    address: '0x9583b5632372F50e949361df977464D619b2f826', 
    pointsPerNFT: 1, 
    galleryIndex: 12,
    image: 'https://static.drip.trade/collections/hypo_pfp.png'
  },
  { 
    name: 'Locals Only by DEMI', 
    address: '0x62FCFAf7573AD8B41a0FBF347AfEb85e06599A75', 
    pointsPerNFT: 1, 
    galleryIndex: 13,
    image: 'https://static.drip.trade/collections/locals-only_pfp.png'
  },
  { 
    name: 'Odd Otties', 
    address: '0x43A9652E2B3cE8970e8d33d8C34252a59a6596Aa', 
    pointsPerNFT: 1, 
    galleryIndex: 14,
    image: 'https://static.drip.trade/collections/odd-otties_pfp.png'
  }
];

const HYPERLIQUID_RPC = 'https://rpc.hyperliquid.xyz/evm';
const ERC721_ABI = [
  'function balanceOf(address owner) view returns (uint256)',
  'function tokenURI(uint256 tokenId) view returns (string)',
  'function tokenOfOwnerByIndex(address owner, uint256 index) view returns (uint256)'
];

// Fetch NFT image from metadata
async function fetchNFTImage(contract, tokenId) {
  try {
    const tokenURI = await contract.tokenURI(tokenId);
    
    // Handle IPFS URLs
    let metadataURL = tokenURI;
    if (tokenURI.startsWith('ipfs://')) {
      metadataURL = tokenURI.replace('ipfs://', 'https://ipfs.io/ipfs/');
    }
    
    // Fetch metadata
    const response = await fetch(metadataURL);
    const metadata = await response.json();
    
    // Get image
    let imageURL = metadata.image || metadata.image_url;
    if (imageURL && imageURL.startsWith('ipfs://')) {
      imageURL = imageURL.replace('ipfs://', 'https://ipfs.io/ipfs/');
    }
    
    return imageURL;
  } catch (error) {
    console.error('Error fetching NFT image:', error);
    return null;
  }
}

async function checkNFTBalances() {
  if (!walletConnected || !walletAddress) {
    console.log('âŒ Wallet not connected');
    return;
  }
  
  if (typeof ethers === 'undefined') {
    console.error('âŒ Ethers.js not loaded!');
    showNotification('âŒ Web3 library error');
    return;
  }
  
  console.log('ğŸ” Checking NFTs:', walletAddress);
  
  try {
    const provider = new ethers.providers.JsonRpcProvider(HYPERLIQUID_RPC);
    const network = await provider.getNetwork();
    console.log('âœ… Connected:', network.name);
    
    let totalNFTs = 0;
    let totalNFTPoints = 0;
    
    for (const collection of NFT_COLLECTIONS) {
      try {
        console.log(`ğŸ“¦ ${collection.name}...`);
        const contract = new ethers.Contract(collection.address, ERC721_ABI, provider);
        const balance = await contract.balanceOf(walletAddress);
        const balanceNum = balance.toNumber();
        
        console.log(`âœ… ${collection.name}: ${balanceNum}`);
        
        // Get NFT card container
        const nftCardContainer = document.querySelector(`[data-nft-index="${collection.galleryIndex}"]`);
        const nftElement = document.getElementById(`nft-${collection.galleryIndex}`);
        
        if (nftCardContainer && nftElement) {
          // ALWAYS show the card container
          nftCardContainer.style.display = 'flex';
          
          // Update text
          nftElement.textContent = `${balanceNum} owned`;
          
          const nftCard = nftCardContainer.querySelector('.nft-card');
          
          if (balanceNum > 0) {
            // HAS NFT â†’ Try to fetch real image
            nftElement.style.color = '#16a34a';
            nftElement.style.fontWeight = '600';
            
            // Try to get first owned token and its image
            let nftImageURL = collection.image; // Fallback to placeholder
            
            try {
              // Get first owned token ID
              const tokenId = await contract.tokenOfOwnerByIndex(walletAddress, 0);
              console.log(`ğŸ–¼ï¸ Fetching image for token #${tokenId}...`);
              
              // Fetch real NFT image
              const realImage = await fetchNFTImage(contract, tokenId);
              if (realImage) {
                nftImageURL = realImage;
                console.log(`âœ… Got real image: ${realImage.substring(0, 50)}...`);
              }
            } catch (e) {
              console.log(`âš ï¸ Could not fetch real image, using placeholder`);
            }
            
            // Add/update image
            let img = nftCard.querySelector('.nft-image');
            if (!img) {
              img = document.createElement('img');
              img.className = 'nft-image';
              img.style.cssText = 'width:100%;height:100%;object-fit:cover;border-radius:10px;position:absolute;top:0;left:0;z-index:0;';
              nftCard.insertBefore(img, nftCard.firstChild);
            }
            img.src = nftImageURL;
            img.alt = collection.name;
            
            // Add error handler for image loading
            img.onerror = () => {
              console.log(`âŒ Image failed to load, using placeholder`);
              img.src = collection.image; // Use placeholder on error
            };
            
            // Ensure text is visible over image
            const strong = nftCard.querySelector('strong');
            if (strong) {
              strong.style.position = 'relative';
              strong.style.zIndex = '2';
              strong.style.textShadow = '0 2px 4px rgba(0,0,0,0.8)';
              strong.style.color = 'white';
              strong.style.background = 'rgba(0,0,0,0.5)';
              strong.style.padding = '4px 8px';
              strong.style.borderRadius = '6px';
            }
          } else {
            // NO NFT â†’ Remove image, keep card
            nftElement.style.color = '#6b7280';
            nftElement.style.fontWeight = '400';
            
            // Remove image if exists
            const img = nftCard.querySelector('.nft-image');
            if (img) {
              img.remove();
            }
            
            // Reset text styling
            const strong = nftCard.querySelector('strong');
            if (strong) {
              strong.style.position = 'relative';
              strong.style.zIndex = '1';
              strong.style.textShadow = 'none';
              strong.style.color = '#111827';
              strong.style.background = 'none';
              strong.style.padding = '0';
            }
          }
        }
        
        totalNFTs += balanceNum;
        totalNFTPoints += balanceNum * collection.pointsPerNFT;
      } catch (error) {
        console.error(`âŒ ${collection.name}:`, error.message);
        
        // Keep card visible even on error
        const nftCardContainer = document.querySelector(`[data-nft-index="${collection.galleryIndex}"]`);
        const nftElement = document.getElementById(`nft-${collection.galleryIndex}`);
        if (nftCardContainer && nftElement) {
          nftCardContainer.style.display = 'flex';
          nftElement.textContent = '0 owned';
          nftElement.style.color = '#6b7280';
        }
      }
    }
    
    nftPointsEarned = totalNFTPoints;
    totalPoints = nftPointsEarned + completedCount;
    document.getElementById('totalPoints').textContent = totalPoints;
    
    console.log(`âœ… Total: ${totalNFTs} NFTs = ${totalNFTPoints} EP`);
    
    if (totalNFTs > 0) {
      showNotification(`ğŸ‰ ${totalNFTs} NFTs! +${totalNFTPoints} EP`);
    } else {
      showNotification('â„¹ï¸ No NFTs found');
    }
    
  } catch (error) {
    console.error('âŒ NFT check error:', error);
    showNotification('âŒ NFT check failed');
  }
}

// ==========================================
// TWITTER AUTO-LOADER
// ==========================================

// Configuration
const TWITTER_API_URL = 'https://catkitsune-site.vercel.app/api/get-tweets';
const TWITTER_REFRESH_INTERVAL = 3 * 60 * 60 * 1000; // 3 hours

// Load tweets from API
async function loadLatestTweets() {
  try {
    console.log('ğŸ”„ Fetching latest tweets from @GborSzakl1...');
    
    const response = await fetch(TWITTER_API_URL);
    
    if (!response.ok) {
      throw new Error(`API error: ${response.status}`);
    }
    
    const data = await response.json();
    
    if (!data.success || !data.tweets || data.tweets.length === 0) {
      console.error('No tweets found');
      return;
    }
    
    // Update Tweet #1
    const tweet1 = data.tweets[0];
    updateTweetCard(0, {
      username: data.username,
      text: tweet1.text,
      url: tweet1.url
    });
    
    // Update Tweet #2
    const tweet2 = data.tweets[1] || tweet1;
    updateTweetCard(1, {
      username: data.username,
      text: tweet2.text,
      url: tweet2.url
    });
    
    console.log('âœ… Tweets loaded successfully!');
    console.log('ğŸ“ Tweet 1:', tweet1.text.substring(0, 60) + '...');
    console.log('ğŸ“ Tweet 2:', tweet2.text.substring(0, 60) + '...');
    
  } catch (error) {
    console.error('âŒ Error loading tweets:', error);
  }
}

// Update individual tweet card
function updateTweetCard(cardIndex, tweetData) {
  const tweetCards = document.querySelectorAll('.twitter-post-card');
  if (!tweetCards[cardIndex]) {
    console.warn(`Card ${cardIndex} not found`);
    return;
  }
  
  const card = tweetCards[cardIndex];
  
  // Update tweet text (find by color style)
  const textElements = card.querySelectorAll('div');
  for (let elem of textElements) {
    const style = elem.getAttribute('style');
    if (style && style.includes('color:#334155')) {
      elem.textContent = tweetData.text;
      console.log(`âœ“ Updated card ${cardIndex + 1} text`);
      break;
    }
  }
  
  // Update Share button link
  const shareLinks = card.querySelectorAll('a');
  for (let link of shareLinks) {
    if (link.href && link.href.includes('x.com')) {
      link.href = tweetData.url;
      console.log(`âœ“ Updated card ${cardIndex + 1} link`);
      break;
    }
  }
}

// Initialize Twitter loader
function initTwitterLoader() {
  console.log('ğŸ¦ Twitter auto-loader initialized');
  
  // Load immediately
  setTimeout(() => {
    loadLatestTweets();
  }, 2000); // Wait 2s for page to fully load
  
  // Auto-refresh every 3 hours
  setInterval(loadLatestTweets, TWITTER_REFRESH_INTERVAL);
  
  console.log('â° Auto-refresh: every 3 hours');
}

// ==========================================
// END TWITTER AUTO-LOADER
// ==========================================

// INIT
window.onload = function() {
  console.log('ğŸš€ CatKitSune loading...');
  loadTwitterUser();
  generateQuestsLeaderboard();
  checkReferralCode();
  initTwitterLoader(); // Initialize Twitter loader
  
  const savedWallet = sessionStorage.getItem('wallet_address');
  if (savedWallet && typeof window.ethereum !== 'undefined') {
    walletAddress = savedWallet;
    walletConnected = true;
    updateWalletButton();
    updateReferralLink();
    updateReferralStats();
  }
  
  console.log('âœ… Ready!');
};

if (typeof window.ethereum !== 'undefined') {
  window.ethereum.on('accountsChanged', (accounts) => {
    if (accounts.length === 0) {
      disconnectWallet();
    } else if (walletConnected) {
      walletAddress = accounts[0];
      updateWalletButton();
      showNotification('ğŸ”„ Account changed');
    }
  });
}
</script>
</body>
</html>
