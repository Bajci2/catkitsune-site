<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>CatKitSune ‚Äì Free Mint</title>
<script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
<style>
body{font-family:Arial;background:#0f172a;color:#fff;text-align:center;padding-top:100px}
button{padding:20px 40px;font-size:20px;border-radius:12px;border:none;cursor:pointer;background:#14b8a6;color:#000;font-weight:700}
</style>
</head>
<body>

<h1>üê± CatKitSune</h1>
<h2>Mint 1 NFT ‚Äì FREE</h2>
<p>0 HYPE ¬∑ Test mint</p>

<button onclick="mint()">Connect & Mint</button>

<script>
const CONTRACT_ADDRESS = "0xf64D89F2DD7E26C4b4555F03b556428F1EBe9598";
const HYPEREVM_CHAIN_ID = "0x3e7"; // 999

const ABI = [
  "function publicMint(uint256 quantity) payable"
];

async function ensureHyperEVM() {
  const currentChain = await window.ethereum.request({ method: "eth_chainId" });
  if (currentChain !== HYPEREVM_CHAIN_ID) {
    await window.ethereum.request({
      method: "wallet_switchEthereumChain",
      params: [{ chainId: HYPEREVM_CHAIN_ID }]
    });
  }
}

async function mint() {
  try {
    if (!window.ethereum) {
      alert("MetaMask required");
      return;
    }

    await window.ethereum.request({ method: "eth_requestAccounts" });
    await ensureHyperEVM();

    // ‚ö†Ô∏è provider CSAK EZUT√ÅN!
    const provider = new ethers.providers.Web3Provider(window.ethereum);
    const signer = provider.getSigner();

    const contract = new ethers.Contract(
      CONTRACT_ADDRESS,
      ABI,
      signer
    );

    const tx = await contract.publicMint(1, { value: 0 });
    await tx.wait();

    alert("‚úÖ FREE NFT MINTED SUCCESSFULLY");

  } catch (err) {
    console.error(err);
    alert("‚ùå Mint failed ‚Äì check console");
  }
}
</script>

</body>
</html>
